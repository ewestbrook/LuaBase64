# -*- org-confirm-babel-evaluate: nil -*-
#+title: luab64: Light and Fast LTN12-compatible Base64 Encoding and Decoding in Lua
* Installataion
LuaRocks or Makefile installations are supported.
** Installing with LuaRocks
#+begin_src bash
luarocks install luab64
#+end_src
** Installing with Makefile
#+begin_src 
git clone https://github.com/ewestbrook/luab64
cd luab64
make && sudo make install
#+end_src
* Synopsis
** Encoding
#+begin_src lua
local luab64 = require'luab64'
local r = luab64.encode(s)
#+end_src
** Decoding
#+begin_src lua
local luab64 = require'luab64'
local r = luab64.decode(s)
#+end_src
** LTN12 Encode Filtering
#+begin_src lua
local ltn12 = require'ltn12'
local luab64 = require'luab64'
local src = ltn12.source.string(s)
local filter = luab64.encfilter()
local sink, t = ltn12.sink.table()
ltn12.pump.all(ltn12.source.chain(src, filter), sink)
local r = table.concat(t)
#+end_src
** LTN12 Decode Filtering
#+begin_src lua
local ltn12 = require'ltn12'
local luab64 = require'luab64'
local src = ltn12.source.string(s)
local filter = luab64.decfilter()
local sink, t = ltn12.sink.table()
ltn12.pump.all(ltn12.source.chain(src, filter), sink)
local r = table.concat(t)
#+end_src
* Examples
#+begin_src lua :exports both :results output
local luab64 = require'luab64'

local s0 = 'This is a string to encode!'
local s1 = 'This is a string to encode!!'
local s2 = 'This is a string to encode!!!'
local s3 = 'This is a string to encode!!!!'

for _,s in ipairs{ s0, s1, s2, s3 } do
  local r = luab64.encode(s)
  local z = luab64.decode(r)
  print('inp: ' .. s)
  print('enc: ' .. r)
  print('dec: ' .. z)
  print() end
#+end_src

#+RESULTS:
#+begin_example
inp: This is a string to encode!
enc: VGhpcyBpcyBhIHN0cmluZyB0byBlbmNvZGUh
dec: This is a string to encode!

inp: This is a string to encode!!
enc: VGhpcyBpcyBhIHN0cmluZyB0byBlbmNvZGUhIQ==
dec: This is a string to encode!!

inp: This is a string to encode!!!
enc: VGhpcyBpcyBhIHN0cmluZyB0byBlbmNvZGUhISE=
dec: This is a string to encode!!!

inp: This is a string to encode!!!!
enc: VGhpcyBpcyBhIHN0cmluZyB0byBlbmNvZGUhISEh
dec: This is a string to encode!!!!
#+end_example
